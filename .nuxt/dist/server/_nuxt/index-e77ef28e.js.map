{"version":3,"file":"index-e77ef28e.js","sources":["../../../../components/PAGINATOR.vue","../../../../components/Tableview.vue","../../../../pages/index.vue"],"sourcesContent":["<template>\r\n  <div class=\"pagination\">\r\n    <button\r\n      v-for=\"page in pages\"\r\n      :key=\"page\"\r\n      class=\"pagination-button\"\r\n      :class=\"{ active: page === currentPage }\"\r\n      @click=\"changePage(page)\"\r\n    >\r\n      {{ page }}\r\n    </button>\r\n\r\n    <button\r\n      v-if=\"showPreviousSubset\"\r\n      class=\"pagination-button\"\r\n      @click=\"previousSubset\"\r\n    >\r\n      &laquo;\r\n    </button>\r\n\r\n    <button v-if=\"showNextSubset\" class=\"pagination-button\" @click=\"nextSubset\">\r\n      &raquo;\r\n    </button>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name:'PAGINATOR',\r\n  props: {\r\n    currentPage: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    totalPages: {\r\n      type: Number,\r\n      required: true,\r\n    },\r\n    perSubset: {\r\n      type: Number,\r\n      default: 5,\r\n    },\r\n  },\r\n  // пропсы прописывал как в ts, я хз так ли должно быть в js \r\n  computed: {\r\n    pages() {\r\n      const totalPages = this.totalPages;\r\n      const currentPage = this.currentPage;\r\n      const perSubset = this.perSubset;\r\n      const currentSubset = Math.ceil(currentPage / perSubset);\r\n      const startPage = (currentSubset - 1) * perSubset + 1;\r\n      const endPage = Math.min(startPage + perSubset - 1, totalPages);\r\n\r\n      return Array.from(\r\n        { length: endPage - startPage + 1 },\r\n        (_, i) => startPage + i\r\n      );\r\n    },\r\n    showPreviousSubset() {\r\n      return this.currentPage > this.perSubset;\r\n    },\r\n    showNextSubset() {\r\n      return this.currentPage + this.perSubset <= this.totalPages;\r\n    },\r\n  },\r\n  methods: {\r\n    changePage(page) {\r\n      this.$emit(\"page-change\", page);\r\n    },\r\n    previousSubset() {\r\n      const previousSubsetPage = this.currentPage - this.perSubset;\r\n      this.changePage(previousSubsetPage);\r\n    },\r\n    nextSubset() {\r\n      const nextSubsetPage = this.currentPage + this.perSubset;\r\n      this.changePage(nextSubsetPage);\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-button {\r\n  margin: 0 5px;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  background-color: #fff;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-button:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.pagination-button.active {\r\n  background-color: #333;\r\n  color: #fff;\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"wrapper\">\r\n    <table class=\"table\">\r\n      <thead>\r\n        <tr>\r\n          <th @click=\"Sortid\">\r\n            ID\r\n            <span v-if=\"sortid === 'asc'\">&#9650;</span>\r\n            <span v-else-if=\"sortid === 'desc'\">&#9660;</span>\r\n          </th>\r\n          <th>Name</th>\r\n          <th>Email</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <NuxtLink\r\n          v-for=\"comment in comments\"\r\n          :key=\"comment.id\"\r\n          target=\"_blank\"\r\n          :to=\"{ path: '/comment', query: comment }\"\r\n          class=\"table-row-link\"\r\n        >\r\n          <tr>\r\n            <td>{{ comment.id }}</td>\r\n            <td>{{ comment.name }}</td>\r\n            <td>{{ comment.email }}</td>\r\n          </tr>\r\n        </NuxtLink>\r\n      </tbody>\r\n    </table>\r\n    <PAGINATOR\r\n      :current-page=\"currentPage\"\r\n      :total-pages=\"totalPages\"\r\n      @page-change=\"changePage\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from \"vue\";\r\nexport default {\r\n  setup() {\r\n    const perPage = 10;\r\n    const currentPage = ref(1);\r\n    const comments = ref(null);\r\n    const totalPages = ref(0);\r\n    const sortid = ref(\"asc\");\r\n\r\n    const fetchComments = async (page) => {\r\n      try {\r\n        const axios = (await import(\"axios\")).default;\r\n        // строка сверху костыль, nuxt выдавал тонну ошибок если импортировать по человечьи\r\n        const response = await axios.get(\r\n          \"https://jsonplaceholder.typicode.com/comments\",\r\n          {\r\n            params: {\r\n              _page: page,\r\n              _limit: perPage,\r\n              _sort: \"id\",\r\n              _order: sortid.value,\r\n            },\r\n          }\r\n        );\r\n        comments.value = response.data;\r\n        const totalCount = response.headers[\"x-total-count\"];\r\n        totalPages.value = Math.ceil(totalCount / perPage);\r\n      } catch (error) {\r\n        console.error(\"Error with fetch: \", error);\r\n      }\r\n    };\r\n\r\n    const Sortid = () => {\r\n      sortid.value = sortid.value === \"asc\" ? \"desc\" : \"asc\";\r\n      fetchComments(currentPage.value);\r\n    };\r\n\r\n    const changePage = (page) => {\r\n      currentPage.value = page;\r\n      fetchComments(page);\r\n    };\r\n\r\n    onMounted(() => {\r\n      fetchComments(currentPage.value);\r\n    });\r\n\r\n    return {\r\n      perPage,\r\n      currentPage,\r\n      comments,\r\n      totalPages,\r\n      fetchComments,\r\n      changePage,\r\n      sortid,\r\n      Sortid,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style>\r\n.wrapper {\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: grid;\r\n  align-items: center;\r\n  justify-items: center;\r\n}\r\n.table {\r\n  width: 85%;\r\n  border-collapse: collapse;\r\n  font-family: Arial, sans-serif;\r\n}\r\n\r\nth,\r\ntd {\r\n  padding: 12px;\r\n  text-align: left;\r\n  border-bottom: 1px solid #ddd;\r\n}\r\n\r\nth {\r\n  background-color: #f2f2f2;\r\n  color: #333;\r\n}\r\n\r\ntr:hover {\r\n  background-color: #f5f5f5;\r\n  cursor: pointer;\r\n}\r\n.table-row-link {\r\n  display: contents;\r\n}\r\n\r\n.pagination {\r\n  margin-top: 20px;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n}\r\n\r\n.pagination-button {\r\n  margin: 0 5px;\r\n  padding: 8px 12px;\r\n  border: 1px solid #ddd;\r\n  background-color: #fff;\r\n  color: #333;\r\n  cursor: pointer;\r\n}\r\n\r\n.pagination-button:hover {\r\n  background-color: #f5f5f5;\r\n}\r\n\r\n.pagination-button.active {\r\n  background-color: #333;\r\n  color: #fff;\r\n}\r\na {\r\n  text-decoration: none;\r\n  color: inherit;\r\n}\r\n</style>\r\n","<template>\r\n  <main>\r\n    <Tableview />\r\n  </main>\r\n</template>\r\n\r\n<script lang=\"ts\">\r\nexport default {\r\n  name: \"IndexPage\",\r\n};\r\n</script>\r\n\r\n<style scoped></style>\r\n"],"names":["_sfc_main","_ssrRenderAttrs","_mergeProps","_ssrRenderList","_ssrRenderClass","_push","_parent","_ssrInterpolate","_createVNode","_toDisplayString"],"mappings":"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"}